<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Flui360 - Gerencie seus hábitos">
    <title>Flui360 - Meus Hábitos</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="pagina-app">
    <!-- 
        MEUS HÁBITOS (habitos.html)
        ===========================
        Tela com CRUD completo de hábitos, inspirada no Loop Habit Tracker.
        
        FUNCIONALIDADES:
        - Criar, editar e excluir hábitos
        - Tipos: Binário (Sim/Não) e Mensurável (com unidade/alvo)
        - Frequência dinâmica (diário, X vezes por semana/mês, X vezes em Y dias)
        - Sistema de lembretes com seleção de dias da semana
        - Persistência em localStorage
    -->

    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icone">&#9679;</span>
                <span class="logo-texto">Flui360</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <ul>
                <li>
                    <a href="dashboard.html" class="nav-link">
                        <span class="nav-icone">&#9632;</span>
                        Dashboard
                    </a>
                </li>
                <li>
                    <a href="habitos.html" class="nav-link ativo">
                        <span class="nav-icone">&#10003;</span>
                        Meus Hábitos
                    </a>
                </li>
                <li>
                    <a href="relatorios.html" class="nav-link">
                        <span class="nav-icone">&#9776;</span>
                        Relatórios
                    </a>
                </li>
            </ul>
        </nav>

        <div class="sidebar-footer">
            <a href="index.html" class="nav-link nav-sair">
                <span class="nav-icone">&#8592;</span>
                Sair
            </a>
        </div>
    </aside>

    <div class="conteudo-principal">
        <header class="header-app">
            <button class="btn-hamburguer" id="btnHamburguer" aria-label="Abrir menu" aria-expanded="false">
                <span class="hamburguer-linha"></span>
                <span class="hamburguer-linha"></span>
                <span class="hamburguer-linha"></span>
            </button>
            
            <div class="header-usuario">
                <span class="saudacao">Olá, <strong>Usuário</strong>!</span>
            </div>
        </header>

        <main class="main-content">
            <div class="header-secao">
                <h1 class="titulo-pagina">Meus Hábitos</h1>
                <p class="subtitulo-pagina">Gerencie seus hábitos diários</p>
            </div>

            <section class="habitos-grid" id="habitosGrid">
            </section>

            <div class="sem-habitos" id="semHabitos" style="display: none;">
                <p>Você ainda não tem hábitos cadastrados.</p>
                <p>Clique no botão + para adicionar seu primeiro hábito!</p>
            </div>
        </main>

        <button class="fab" id="btnNovoHabito" aria-label="Adicionar novo hábito">
            <span>+</span>
        </button>
    </div>

    <!-- MODAL AVANÇADO - CRIAR/EDITAR HÁBITO -->
    <div class="modal-backdrop" id="modalHabitoBackdrop">
        <div class="modal modal-habito modal-habito-avancado" role="dialog" aria-labelledby="tituloModalHabito" aria-modal="true">
            <div class="modal-header">
                <h2 id="tituloModalHabito">Novo Hábito</h2>
                <button type="button" class="btn-fechar-modal" id="btnFecharModalHabito" aria-label="Fechar modal">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <form class="form-habito form-habito-avancado" id="formHabito">
                    <input type="hidden" id="habitoId" value="">
                    
                    <!-- PASSO 1: TIPO DO HÁBITO -->
                    <div class="form-secao">
                        <h3 class="form-secao-titulo">Tipo do Hábito</h3>
                        <div class="tipo-habito-opcoes">
                            <label class="tipo-habito-opcao">
                                <input type="radio" name="tipoHabito" value="binario" checked>
                                <div class="tipo-habito-card">
                                    <span class="tipo-icone">&#10003;</span>
                                    <span class="tipo-nome">Sim ou Não</span>
                                    <span class="tipo-descricao">Marcar/desmarcar como concluído</span>
                                </div>
                            </label>
                            <label class="tipo-habito-opcao">
                                <input type="radio" name="tipoHabito" value="mensuravel">
                                <div class="tipo-habito-card">
                                    <span class="tipo-icone">&#9776;</span>
                                    <span class="tipo-nome">Mensurável</span>
                                    <span class="tipo-descricao">Registrar valores numéricos</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- PASSO 2: NOME DO HÁBITO -->
                    <div class="form-secao">
                        <div class="campo-grupo">
                            <label for="nomeHabito">Nome do hábito</label>
                            <input 
                                type="text" 
                                id="nomeHabito" 
                                name="nomeHabito" 
                                placeholder="Ex: Beber água, Meditar, Ler..." 
                                required
                            >
                        </div>
                    </div>

                    <!-- PASSO 3: CAMPOS PARA HÁBITO MENSURÁVEL -->
                    <div class="form-secao campos-mensuravel" id="camposMensuravel" style="display: none;">
                        <h3 class="form-secao-titulo">Meta Diária</h3>
                        <div class="campos-linha">
                            <div class="campo-grupo campo-pequeno">
                                <label for="alvoDiario">Alvo</label>
                                <input 
                                    type="number" 
                                    id="alvoDiario" 
                                    name="alvoDiario" 
                                    min="1" 
                                    value="1"
                                    placeholder="Ex: 2"
                                >
                            </div>
                            <div class="campo-grupo campo-medio">
                                <label for="unidadeHabito">Unidade</label>
                                <input 
                                    type="text" 
                                    id="unidadeHabito" 
                                    name="unidadeHabito" 
                                    placeholder="Ex: litros, páginas, minutos"
                                >
                            </div>
                        </div>
                    </div>

                    <!-- PASSO 4: FREQUÊNCIA -->
                    <div class="form-secao">
                        <h3 class="form-secao-titulo">Frequência</h3>
                        <div class="campo-grupo">
                            <select id="tipoFrequencia" name="tipoFrequencia" required>
                                <option value="diario">Todos os dias</option>
                                <option value="x-semana">X vezes por semana</option>
                                <option value="x-mes">X vezes por mês</option>
                                <option value="x-em-y">X vezes em Y dias</option>
                            </select>
                        </div>
                        
                        <!-- Campos dinâmicos para frequência -->
                        <div class="campos-frequencia-dinamica" id="camposFrequenciaDinamica">
                            <div class="campos-linha campos-x-semana" id="camposXSemana" style="display: none;">
                                <div class="campo-grupo campo-pequeno">
                                    <label for="vezesXSemana">Vezes</label>
                                    <input type="number" id="vezesXSemana" min="1" max="7" value="3">
                                </div>
                                <span class="campo-complemento">vezes por semana</span>
                            </div>
                            
                            <div class="campos-linha campos-x-mes" id="camposXMes" style="display: none;">
                                <div class="campo-grupo campo-pequeno">
                                    <label for="vezesXMes">Vezes</label>
                                    <input type="number" id="vezesXMes" min="1" max="31" value="10">
                                </div>
                                <span class="campo-complemento">vezes por mês</span>
                            </div>
                            
                            <div class="campos-linha campos-x-em-y" id="camposXEmY" style="display: none;">
                                <div class="campo-grupo campo-pequeno">
                                    <label for="vezesX">X</label>
                                    <input type="number" id="vezesX" min="1" value="3">
                                </div>
                                <span class="campo-complemento">vezes em</span>
                                <div class="campo-grupo campo-pequeno">
                                    <label for="diasY">Y</label>
                                    <input type="number" id="diasY" min="1" value="5">
                                </div>
                                <span class="campo-complemento">dias</span>
                            </div>
                        </div>
                    </div>

                    <!-- PASSO 5: LEMBRETES -->
                    <div class="form-secao">
                        <h3 class="form-secao-titulo">Lembretes</h3>
                        
                        <div class="lembrete-toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="lembreteAtivo" name="lembreteAtivo">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="lembreteLabel">Desabilitado</span>
                        </div>

                        <!-- Configuração de lembrete (oculto por padrão) -->
                        <div class="lembrete-config" id="lembreteConfig" style="display: none;">
                            <div class="campo-grupo">
                                <label for="horaLembrete">Horário do lembrete</label>
                                <input type="time" id="horaLembrete" name="horaLembrete" value="08:00">
                            </div>
                            
                            <div class="dias-semana-container">
                                <div class="dias-semana-header">
                                    <span>Dias da semana</span>
                                    <button type="button" class="btn-texto" id="btnToggleDias">Selecionar todos</button>
                                </div>
                                <div class="dias-semana-grid" id="diasSemanaGrid">
                                    <button type="button" class="dia-semana-btn" data-dia="dom">Dom</button>
                                    <button type="button" class="dia-semana-btn" data-dia="seg">Seg</button>
                                    <button type="button" class="dia-semana-btn" data-dia="ter">Ter</button>
                                    <button type="button" class="dia-semana-btn" data-dia="qua">Qua</button>
                                    <button type="button" class="dia-semana-btn" data-dia="qui">Qui</button>
                                    <button type="button" class="dia-semana-btn" data-dia="sex">Sex</button>
                                    <button type="button" class="dia-semana-btn" data-dia="sab">Sáb</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- PASSO 6: COR DO HÁBITO -->
                    <div class="form-secao">
                        <h3 class="form-secao-titulo">Cor</h3>
                        <div class="cores-grid" id="coresGrid">
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#10b981" checked>
                                <span class="cor-preview" style="background-color: #10b981"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#f59e0b">
                                <span class="cor-preview" style="background-color: #f59e0b"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#6366f1">
                                <span class="cor-preview" style="background-color: #6366f1"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#8b5cf6">
                                <span class="cor-preview" style="background-color: #8b5cf6"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#3b82f6">
                                <span class="cor-preview" style="background-color: #3b82f6"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#ec4899">
                                <span class="cor-preview" style="background-color: #ec4899"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#14b8a6">
                                <span class="cor-preview" style="background-color: #14b8a6"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#ef4444">
                                <span class="cor-preview" style="background-color: #ef4444"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-acoes">
                        <button type="button" class="btn-secundario" id="btnCancelarHabito">Cancelar</button>
                        <button type="submit" class="btn-primario" id="btnSalvarHabito">Salvar Hábito</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- MODAL DE CONFIRMAÇÃO DE EXCLUSÃO -->
    <div class="modal-backdrop" id="modalExcluirBackdrop">
        <div class="modal modal-pequeno" role="dialog" aria-labelledby="tituloModalExcluir" aria-modal="true">
            <div class="modal-header">
                <h2 id="tituloModalExcluir">Excluir Hábito</h2>
                <button type="button" class="btn-fechar-modal" id="btnFecharModalExcluir" aria-label="Fechar modal">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja excluir o hábito "<strong id="nomeHabitoExcluir"></strong>"?</p>
                <p class="texto-aviso">Esta ação não pode ser desfeita.</p>
                <div class="form-acoes">
                    <button type="button" class="btn-secundario" id="btnCancelarExcluir">Cancelar</button>
                    <button type="button" class="btn-perigo" id="btnConfirmarExcluir">Excluir</button>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/js/main.js"></script>
</body>
</html>
