<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Flui360 - Gerencie seus hábitos">
    <title>Flui360 - Meus Hábitos</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="pagina-app">
    <!-- 
        MEUS HÁBITOS (habitos.html)
        ===========================
        Tela com CRUD completo de hábitos, inspirada no Loop Habit Tracker.
        
        FLUXO DO FAB:
        1. Clique no FAB abre MODAL DE TIPO (binário ou mensurável)
        2. Após escolher o tipo, abre FORMULÁRIO PRINCIPAL com tipo fixo
        3. Na edição, o tipo não pode ser alterado
        
        HÁBITOS MENSURÁVEIS:
        - Ao clicar para completar, abre MODAL DE VALOR
        - Usuário insere o valor do dia (ex: "Quantas páginas leu?")
        
        FREQUÊNCIA "X EM Y DIAS":
        - Ao selecionar esta opção, abre MODAL DE FREQUÊNCIA
        - Usuário define X e Y no modal
    -->

    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icone">&#9679;</span>
                <span class="logo-texto">Flui360</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <ul>
                <li>
                    <a href="dashboard.html" class="nav-link">
                        <span class="nav-icone">&#9632;</span>
                        Dashboard
                    </a>
                </li>
                <li>
                    <a href="habitos.html" class="nav-link ativo">
                        <span class="nav-icone">&#10003;</span>
                        Meus Hábitos
                    </a>
                </li>
                <li>
                    <a href="relatorios.html" class="nav-link">
                        <span class="nav-icone">&#9776;</span>
                        Relatórios
                    </a>
                </li>
            </ul>
        </nav>

        <div class="sidebar-footer">
            <a href="index.html" class="nav-link nav-sair">
                <span class="nav-icone">&#8592;</span>
                Sair
            </a>
        </div>
    </aside>

    <div class="conteudo-principal">
        <header class="header-app">
            <button class="btn-hamburguer" id="btnHamburguer" aria-label="Abrir menu" aria-expanded="false">
                <span class="hamburguer-linha"></span>
                <span class="hamburguer-linha"></span>
                <span class="hamburguer-linha"></span>
            </button>
            
            <div class="header-usuario">
                <span class="saudacao">Olá, <strong>Usuário</strong>!</span>
            </div>
        </header>

        <main class="main-content">
            <div class="header-secao">
                <h1 class="titulo-pagina">Meus Hábitos</h1>
                <p class="subtitulo-pagina">Gerencie seus hábitos diários</p>
            </div>

            <section class="habitos-grid" id="habitosGrid">
            </section>

            <div class="sem-habitos" id="semHabitos" style="display: none;">
                <p>Você ainda não tem hábitos cadastrados.</p>
                <p>Clique no botão + para adicionar seu primeiro hábito!</p>
            </div>
        </main>

        <button class="fab" id="btnNovoHabito" aria-label="Adicionar novo hábito">
            <span>+</span>
        </button>
    </div>

    <!-- 
        MODAL 1: SELEÇÃO DE TIPO DE HÁBITO
        ==================================
        Aparece primeiro quando o usuário clica no FAB para criar novo hábito.
        Após selecionar o tipo, abre o formulário principal.
    -->
    <div class="modal-backdrop" id="modalTipoBackdrop">
        <div class="modal modal-pequeno" role="dialog" aria-labelledby="tituloModalTipo" aria-modal="true">
            <div class="modal-header">
                <h2 id="tituloModalTipo">Escolha o Tipo de Hábito</h2>
                <button type="button" class="btn-fechar-modal" id="btnFecharModalTipo" aria-label="Fechar modal">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-descricao">Selecione como você deseja acompanhar este hábito:</p>
                <div class="tipo-habito-opcoes">
                    <button type="button" class="tipo-habito-btn" data-tipo="binario">
                        <span class="tipo-icone">&#10003;</span>
                        <span class="tipo-nome">Sim ou Não</span>
                        <span class="tipo-descricao">Marcar/desmarcar como concluído</span>
                    </button>
                    <button type="button" class="tipo-habito-btn" data-tipo="mensuravel">
                        <span class="tipo-icone">&#9776;</span>
                        <span class="tipo-nome">Mensurável</span>
                        <span class="tipo-descricao">Registrar valores numéricos</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 
        MODAL 2: FORMULÁRIO PRINCIPAL DE HÁBITO
        =======================================
        Aparece após selecionar o tipo no modal anterior.
        O tipo é fixo e não pode ser alterado durante edição.
    -->
    <div class="modal-backdrop" id="modalHabitoBackdrop">
        <div class="modal modal-habito modal-habito-avancado" role="dialog" aria-labelledby="tituloModalHabito" aria-modal="true">
            <div class="modal-header">
                <h2 id="tituloModalHabito">Novo Hábito</h2>
                <button type="button" class="btn-fechar-modal" id="btnFecharModalHabito" aria-label="Fechar modal">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <form class="form-habito form-habito-avancado" id="formHabito">
                    <input type="hidden" id="habitoId" value="">
                    <input type="hidden" id="tipoHabitoHidden" value="binario">

                    <!-- INDICADOR DE TIPO (somente leitura) -->
                    <div class="form-secao tipo-indicador-secao" id="tipoIndicadorSecao">
                        <div class="tipo-indicador" id="tipoIndicador">
                            <span class="tipo-indicador-icone">&#10003;</span>
                            <span class="tipo-indicador-texto">Hábito Sim/Não</span>
                        </div>
                    </div>

                    <!-- NOME DO HÁBITO -->
                    <div class="form-secao">
                        <div class="campo-grupo">
                            <label for="nomeHabito">Nome do hábito</label>
                            <input 
                                type="text" 
                                id="nomeHabito" 
                                name="nomeHabito" 
                                placeholder="Ex: Beber água, Meditar, Ler..." 
                                required
                            >
                        </div>
                    </div>

                    <!-- CAMPOS PARA HÁBITO MENSURÁVEL -->
                    <div class="form-secao campos-mensuravel" id="camposMensuravel" style="display: none;">
                        <h3 class="form-secao-titulo">Meta Diária</h3>
                        <div class="campos-linha">
                            <div class="campo-grupo campo-pequeno">
                                <label for="alvoDiario">Alvo</label>
                                <input 
                                    type="number" 
                                    id="alvoDiario" 
                                    name="alvoDiario" 
                                    min="1" 
                                    value="1"
                                    placeholder="Ex: 2"
                                >
                            </div>
                            <div class="campo-grupo campo-medio">
                                <label for="unidadeHabito">Unidade</label>
                                <input 
                                    type="text" 
                                    id="unidadeHabito" 
                                    name="unidadeHabito" 
                                    placeholder="Ex: litros, páginas, minutos"
                                >
                            </div>
                        </div>
                    </div>

                    <!-- FREQUÊNCIA -->
                    <div class="form-secao">
                        <h3 class="form-secao-titulo">Frequência</h3>
                        <div class="campo-grupo">
                            <select id="tipoFrequencia" name="tipoFrequencia" required>
                                <option value="diario">Todos os dias</option>
                                <option value="x-semana">X vezes por semana</option>
                                <option value="x-mes">X vezes por mês</option>
                                <option value="x-em-y">Personalizado...</option>
                            </select>
                        </div>
                        
                        <!-- Campos dinâmicos para frequência (exceto x-em-y que usa modal) -->
                        <div class="campos-frequencia-dinamica" id="camposFrequenciaDinamica">
                            <div class="campos-linha campos-x-semana" id="camposXSemana" style="display: none;">
                                <div class="campo-grupo campo-pequeno">
                                    <label for="vezesXSemana">Vezes</label>
                                    <input type="number" id="vezesXSemana" min="1" max="7" value="3">
                                </div>
                                <span class="campo-complemento">vezes por semana</span>
                            </div>
                            
                            <div class="campos-linha campos-x-mes" id="camposXMes" style="display: none;">
                                <div class="campo-grupo campo-pequeno">
                                    <label for="vezesXMes">Vezes</label>
                                    <input type="number" id="vezesXMes" min="1" max="31" value="10">
                                </div>
                                <span class="campo-complemento">vezes por mês</span>
                            </div>
                            
                            <!-- Indicador de frequência personalizada (X em Y dias) -->
                            <div class="frequencia-personalizada-info" id="frequenciaPersonalizadaInfo" style="display: none;">
                                <span class="frequencia-personalizada-texto" id="frequenciaPersonalizadaTexto">3 vezes em 5 dias</span>
                                <button type="button" class="btn-texto" id="btnEditarFrequenciaXY">Alterar</button>
                            </div>
                        </div>
                    </div>

                    <!-- LEMBRETES -->
                    <div class="form-secao">
                        <h3 class="form-secao-titulo">Lembretes</h3>
                        
                        <div class="lembrete-toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="lembreteAtivo" name="lembreteAtivo">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="lembreteLabel">Desabilitado</span>
                        </div>

                        <div class="lembrete-config" id="lembreteConfig" style="display: none;">
                            <div class="campo-grupo">
                                <label for="horaLembrete">Horário do lembrete</label>
                                <input type="time" id="horaLembrete" name="horaLembrete" value="08:00">
                            </div>
                            
                            <div class="dias-semana-container">
                                <div class="dias-semana-header">
                                    <span>Dias da semana</span>
                                    <button type="button" class="btn-texto" id="btnToggleDias">Selecionar todos</button>
                                </div>
                                <div class="dias-semana-grid" id="diasSemanaGrid">
                                    <button type="button" class="dia-semana-btn" data-dia="dom">Dom</button>
                                    <button type="button" class="dia-semana-btn" data-dia="seg">Seg</button>
                                    <button type="button" class="dia-semana-btn" data-dia="ter">Ter</button>
                                    <button type="button" class="dia-semana-btn" data-dia="qua">Qua</button>
                                    <button type="button" class="dia-semana-btn" data-dia="qui">Qui</button>
                                    <button type="button" class="dia-semana-btn" data-dia="sex">Sex</button>
                                    <button type="button" class="dia-semana-btn" data-dia="sab">Sáb</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- COR DO HÁBITO -->
                    <div class="form-secao">
                        <h3 class="form-secao-titulo">Cor</h3>
                        <div class="cores-grid" id="coresGrid">
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#10b981" checked>
                                <span class="cor-preview" style="background-color: #10b981"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#f59e0b">
                                <span class="cor-preview" style="background-color: #f59e0b"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#6366f1">
                                <span class="cor-preview" style="background-color: #6366f1"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#8b5cf6">
                                <span class="cor-preview" style="background-color: #8b5cf6"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#3b82f6">
                                <span class="cor-preview" style="background-color: #3b82f6"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#ec4899">
                                <span class="cor-preview" style="background-color: #ec4899"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#14b8a6">
                                <span class="cor-preview" style="background-color: #14b8a6"></span>
                            </label>
                            <label class="cor-opcao">
                                <input type="radio" name="corHabito" value="#ef4444">
                                <span class="cor-preview" style="background-color: #ef4444"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-acoes">
                        <button type="button" class="btn-secundario" id="btnCancelarHabito">Cancelar</button>
                        <button type="submit" class="btn-primario" id="btnSalvarHabito">Salvar Hábito</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 
        MODAL 3: VALOR PARA HÁBITO MENSURÁVEL
        =====================================
        Aparece quando o usuário clica para "completar" um hábito mensurável.
        Pergunta o valor do dia (ex: "Quantas páginas você leu hoje?")
    -->
    <div class="modal-backdrop" id="modalValorBackdrop">
        <div class="modal modal-pequeno" role="dialog" aria-labelledby="tituloModalValor" aria-modal="true">
            <div class="modal-header">
                <h2 id="tituloModalValor">Registrar Valor</h2>
                <button type="button" class="btn-fechar-modal" id="btnFecharModalValor" aria-label="Fechar modal">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-pergunta" id="perguntaValor">Quanto você completou hoje?</p>
                <div class="campo-valor-modal">
                    <input type="number" id="inputValorDia" min="0" step="0.5" value="0" class="input-valor-grande">
                    <span class="valor-unidade" id="valorUnidade">unidades</span>
                </div>
                <div class="valor-progresso-preview">
                    <span id="valorProgressoTexto">0/0</span>
                    <div class="progresso-barra-mensuravel">
                        <div class="progresso-barra-preenchido" id="valorProgressoBarra" style="width: 0%"></div>
                    </div>
                </div>
                <div class="form-acoes">
                    <button type="button" class="btn-secundario" id="btnCancelarValor">Cancelar</button>
                    <button type="button" class="btn-primario" id="btnConfirmarValor">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 
        MODAL 4: FREQUÊNCIA PERSONALIZADA (X EM Y DIAS)
        ================================================
        Aparece quando o usuário seleciona "Personalizado..." no select de frequência.
        Permite definir X vezes em Y dias.
    -->
    <div class="modal-backdrop" id="modalFrequenciaXYBackdrop">
        <div class="modal modal-pequeno" role="dialog" aria-labelledby="tituloModalFrequenciaXY" aria-modal="true">
            <div class="modal-header">
                <h2 id="tituloModalFrequenciaXY">Frequência Personalizada</h2>
                <button type="button" class="btn-fechar-modal" id="btnFecharModalFrequenciaXY" aria-label="Fechar modal">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-descricao">Defina quantas vezes você quer completar este hábito:</p>
                <div class="frequencia-xy-container">
                    <input type="number" id="inputVezesX" min="1" value="3" class="input-frequencia">
                    <span class="frequencia-texto">vezes em</span>
                    <input type="number" id="inputDiasY" min="1" value="5" class="input-frequencia">
                    <span class="frequencia-texto">dias</span>
                </div>
                <p class="frequencia-exemplo" id="frequenciaExemplo">Exemplo: Completar 3 vezes a cada 5 dias</p>
                <div class="form-acoes">
                    <button type="button" class="btn-secundario" id="btnCancelarFrequenciaXY">Cancelar</button>
                    <button type="button" class="btn-primario" id="btnConfirmarFrequenciaXY">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL 5: CONFIRMAÇÃO DE EXCLUSÃO -->
    <div class="modal-backdrop" id="modalExcluirBackdrop">
        <div class="modal modal-pequeno" role="dialog" aria-labelledby="tituloModalExcluir" aria-modal="true">
            <div class="modal-header">
                <h2 id="tituloModalExcluir">Excluir Hábito</h2>
                <button type="button" class="btn-fechar-modal" id="btnFecharModalExcluir" aria-label="Fechar modal">
                    &times;
                </button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja excluir o hábito "<strong id="nomeHabitoExcluir"></strong>"?</p>
                <p class="texto-aviso">Esta ação não pode ser desfeita.</p>
                <div class="form-acoes">
                    <button type="button" class="btn-secundario" id="btnCancelarExcluir">Cancelar</button>
                    <button type="button" class="btn-perigo" id="btnConfirmarExcluir">Excluir</button>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/js/main.js"></script>
</body>
</html>
